<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>eiaha</title>
  
  <subtitle>eiaha �ĸ��˲���</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.onepie.cn/"/>
  <updated>2020-06-23T11:09:53.138Z</updated>
  <id>http://blog.onepie.cn/</id>
  
  <author>
    <name>Joker</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="http://blog.onepie.cn/202006/hello-world.html"/>
    <id>http://blog.onepie.cn/202006/hello-world.html</id>
    <published>2020-06-23T11:09:53.138Z</published>
    <updated>2020-06-23T11:09:53.138Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>PHP 根据url获取顶级域名</title>
    <link href="http://blog.onepie.cn/202006/php-get-top-host.html"/>
    <id>http://blog.onepie.cn/202006/php-get-top-host.html</id>
    <published>2020-06-09T15:21:00.000Z</published>
    <updated>2020-06-22T01:10:26.072Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">Note:</span> 获取顶级域名</span></span><br><span class="line"><span class="comment"> * Author: joker</span></span><br><span class="line"><span class="comment"> * Time: 2019/7/22 11:32</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $url</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_top_host</span><span class="params">($url)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!$url) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $url = strtolower($url);</span><br><span class="line">    $hosts = parse_url($url);</span><br><span class="line">    $host = $hosts[<span class="string">'host'</span>];</span><br><span class="line">    <span class="comment">// 检测是几级域名</span></span><br><span class="line">    $data = explode(<span class="string">'.'</span>, $host);</span><br><span class="line">    $n = count($data);</span><br><span class="line">    <span class="comment">// 判断是否是双后缀-可进行配置增加</span></span><br><span class="line">    $preg = <span class="string">'/[\w].+\.(com|net|org|gov|edu)\.cn$/'</span>;</span><br><span class="line">    <span class="keyword">if</span> ($n &gt; <span class="number">2</span> &amp;&amp; preg_match($preg, $host)) &#123;</span><br><span class="line">        <span class="comment">//双后缀取后三位</span></span><br><span class="line">        $host = $data[$n - <span class="number">3</span>] . <span class="string">'.'</span> . $data[$n - <span class="number">2</span>] . <span class="string">'.'</span> . $data[$n - <span class="number">1</span>];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 不是双后缀的取后两位</span></span><br><span class="line">        $host = $data[$n - <span class="number">2</span>] . <span class="string">'.'</span> . $data[$n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $host;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;
      
    
    </summary>
    
    
    
      <category term="php" scheme="http://blog.onepie.cn/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>PHP 实现各类状态码</title>
    <link href="http://blog.onepie.cn/202006/php-http-status.html"/>
    <id>http://blog.onepie.cn/202006/php-http-status.html</id>
    <published>2020-06-09T14:51:46.000Z</published>
    <updated>2020-06-22T01:10:26.072Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">Note:</span>  状态码返回函数</span></span><br><span class="line"><span class="comment"> * Author: joker</span></span><br><span class="line"><span class="comment"> * Time: 2020/6/09 19:07</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $num</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">httpStatus</span><span class="params">($num)</span></span>&#123;<span class="comment">//网页返回码</span></span><br><span class="line">    <span class="keyword">static</span> $http = <span class="keyword">array</span> (</span><br><span class="line">        <span class="number">100</span> =&gt; <span class="string">"HTTP/1.1 100 Continue"</span>,</span><br><span class="line">        <span class="number">101</span> =&gt; <span class="string">"HTTP/1.1 101 Switching Protocols"</span>,</span><br><span class="line">        <span class="number">200</span> =&gt; <span class="string">"HTTP/1.1 200 OK"</span>,</span><br><span class="line">        <span class="number">201</span> =&gt; <span class="string">"HTTP/1.1 201 Created"</span>,</span><br><span class="line">        <span class="number">202</span> =&gt; <span class="string">"HTTP/1.1 202 Accepted"</span>,</span><br><span class="line">        <span class="number">203</span> =&gt; <span class="string">"HTTP/1.1 203 Non-Authoritative Information"</span>,</span><br><span class="line">        <span class="number">204</span> =&gt; <span class="string">"HTTP/1.1 204 No Content"</span>,</span><br><span class="line">        <span class="number">205</span> =&gt; <span class="string">"HTTP/1.1 205 Reset Content"</span>,</span><br><span class="line">        <span class="number">206</span> =&gt; <span class="string">"HTTP/1.1 206 Partial Content"</span>,</span><br><span class="line">        <span class="number">300</span> =&gt; <span class="string">"HTTP/1.1 300 Multiple Choices"</span>,</span><br><span class="line">        <span class="number">301</span> =&gt; <span class="string">"HTTP/1.1 301 Moved Permanently"</span>,</span><br><span class="line">        <span class="number">302</span> =&gt; <span class="string">"HTTP/1.1 302 Found"</span>,</span><br><span class="line">        <span class="number">303</span> =&gt; <span class="string">"HTTP/1.1 303 See Other"</span>,</span><br><span class="line">        <span class="number">304</span> =&gt; <span class="string">"HTTP/1.1 304 Not Modified"</span>,</span><br><span class="line">        <span class="number">305</span> =&gt; <span class="string">"HTTP/1.1 305 Use Proxy"</span>,</span><br><span class="line">        <span class="number">307</span> =&gt; <span class="string">"HTTP/1.1 307 Temporary Redirect"</span>,</span><br><span class="line">        <span class="number">400</span> =&gt; <span class="string">"HTTP/1.1 400 Bad Request"</span>,</span><br><span class="line">        <span class="number">401</span> =&gt; <span class="string">"HTTP/1.1 401 Unauthorized"</span>,</span><br><span class="line">        <span class="number">402</span> =&gt; <span class="string">"HTTP/1.1 402 Payment Required"</span>,</span><br><span class="line">        <span class="number">403</span> =&gt; <span class="string">"HTTP/1.1 403 Forbidden"</span>,</span><br><span class="line">        <span class="number">404</span> =&gt; <span class="string">"HTTP/1.1 404 Not Found"</span>,</span><br><span class="line">        <span class="number">405</span> =&gt; <span class="string">"HTTP/1.1 405 Method Not Allowed"</span>,</span><br><span class="line">        <span class="number">406</span> =&gt; <span class="string">"HTTP/1.1 406 Not Acceptable"</span>,</span><br><span class="line">        <span class="number">407</span> =&gt; <span class="string">"HTTP/1.1 407 Proxy Authentication Required"</span>,</span><br><span class="line">        <span class="number">408</span> =&gt; <span class="string">"HTTP/1.1 408 Request Time-out"</span>,</span><br><span class="line">        <span class="number">409</span> =&gt; <span class="string">"HTTP/1.1 409 Conflict"</span>,</span><br><span class="line">        <span class="number">410</span> =&gt; <span class="string">"HTTP/1.1 410 Gone"</span>,</span><br><span class="line">        <span class="number">411</span> =&gt; <span class="string">"HTTP/1.1 411 Length Required"</span>,</span><br><span class="line">        <span class="number">412</span> =&gt; <span class="string">"HTTP/1.1 412 Precondition Failed"</span>,</span><br><span class="line">        <span class="number">413</span> =&gt; <span class="string">"HTTP/1.1 413 Request Entity Too Large"</span>,</span><br><span class="line">        <span class="number">414</span> =&gt; <span class="string">"HTTP/1.1 414 Request-URI Too Large"</span>,</span><br><span class="line">        <span class="number">415</span> =&gt; <span class="string">"HTTP/1.1 415 Unsupported Media Type"</span>,</span><br><span class="line">        <span class="number">416</span> =&gt; <span class="string">"HTTP/1.1 416 Requested range not satisfiable"</span>,</span><br><span class="line">        <span class="number">417</span> =&gt; <span class="string">"HTTP/1.1 417 Expectation Failed"</span>,</span><br><span class="line">        <span class="number">500</span> =&gt; <span class="string">"HTTP/1.1 500 Internal Server Error"</span>,</span><br><span class="line">        <span class="number">501</span> =&gt; <span class="string">"HTTP/1.1 501 Not Implemented"</span>,</span><br><span class="line">        <span class="number">502</span> =&gt; <span class="string">"HTTP/1.1 502 Bad Gateway"</span>,</span><br><span class="line">        <span class="number">503</span> =&gt; <span class="string">"HTTP/1.1 503 Service Unavailable"</span>,</span><br><span class="line">        <span class="number">504</span> =&gt; <span class="string">"HTTP/1.1 504 Gateway Time-out"</span></span><br><span class="line">    );</span><br><span class="line">    header($http[$num]);</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;
      
    
    </summary>
    
    
    
      <category term="php" scheme="http://blog.onepie.cn/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>JS 实现AES加解密</title>
    <link href="http://blog.onepie.cn/202006/js-aes.html"/>
    <id>http://blog.onepie.cn/202006/js-aes.html</id>
    <published>2020-06-09T03:08:44.000Z</published>
    <updated>2020-06-22T01:10:26.069Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">       <span class="function"><span class="keyword">function</span> <span class="title">encrypt_str</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">           <span class="keyword">var</span> KEY = <span class="string">'test'</span>;</span><br><span class="line">           <span class="keyword">var</span> IV = hex_md5(KEY).substr(<span class="number">8</span>, <span class="number">16</span>);</span><br><span class="line">           KEY =  hex_md5(KEY).substr(<span class="number">0</span>, <span class="number">16</span>);</span><br><span class="line">           <span class="keyword">var</span> key = CryptoJS.enc.Utf8.parse(KEY); <span class="comment">// 秘钥</span></span><br><span class="line">           <span class="keyword">var</span> iv = CryptoJS.enc.Utf8.parse(IV); <span class="comment">//向量iv</span></span><br><span class="line">           <span class="keyword">var</span> encrypted = CryptoJS.AES.encrypt(str, key, &#123;</span><br><span class="line">               iv: iv,</span><br><span class="line">               mode: CryptoJS.mode.CBC,</span><br><span class="line">               padding: CryptoJS.pad.Pkcs7,</span><br><span class="line">           &#125;);</span><br><span class="line">           <span class="keyword">return</span> encrypted.toString();</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="function"><span class="keyword">function</span> <span class="title">decrypt_str</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">           <span class="keyword">var</span> KEY = <span class="string">'test'</span>;</span><br><span class="line">           <span class="keyword">var</span> IV = hex_md5(KEY).substr(<span class="number">8</span>, <span class="number">16</span>);</span><br><span class="line">           KEY =  hex_md5(KEY).substr(<span class="number">0</span>, <span class="number">16</span>);</span><br><span class="line">           <span class="keyword">var</span> key = CryptoJS.enc.Utf8.parse(KEY); <span class="comment">// 秘钥</span></span><br><span class="line">           <span class="keyword">var</span> iv = CryptoJS.enc.Utf8.parse(IV); <span class="comment">//向量iv</span></span><br><span class="line">           <span class="keyword">var</span> decrypted = CryptoJS.AES.decrypt(str, key, &#123;</span><br><span class="line">               iv: iv,</span><br><span class="line">               mode: CryptoJS.mode.CBC,</span><br><span class="line">               padding: CryptoJS.pad.Pkcs7,</span><br><span class="line">           &#125;);</span><br><span class="line">           <span class="keyword">return</span> decrypted.toString(CryptoJS.enc.Utf8);</span><br><span class="line">       &#125;;</span><br><span class="line">   &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span 
      
    
    </summary>
    
    
    
      <category term="js-aes" scheme="http://blog.onepie.cn/tags/js-aes/"/>
    
  </entry>
  
  <entry>
    <title>PHP 实现AES加解密</title>
    <link href="http://blog.onepie.cn/202006/php-aes.html"/>
    <id>http://blog.onepie.cn/202006/php-aes.html</id>
    <published>2020-06-09T03:06:10.000Z</published>
    <updated>2020-06-22T01:10:26.071Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">Note:</span> AES加密(128) 向量采用key md5 8-24位</span></span><br><span class="line"><span class="comment"> * Author: joker</span></span><br><span class="line"><span class="comment"> * Time: 2020/6/8 14:24</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>        $data_str</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $app_secret</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">aesEncrypt</span><span class="params">($data_str, $app_secret)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $iv = substr(md5($app_secret), <span class="number">8</span>, <span class="number">16</span>);</span><br><span class="line">    $app_secret = substr(md5($app_secret), <span class="number">0</span>, <span class="number">16</span>);</span><br><span class="line">    $encryptd = openssl_encrypt($data_str, <span class="string">'AES-128-CBC'</span>, $app_secret, OPENSSL_RAW_DATA, $iv);</span><br><span class="line">    <span class="keyword">return</span> base64_encode($encryptd);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">Note:</span> AES解密</span></span><br><span class="line"><span class="comment"> * Author: joker</span></span><br><span class="line"><span class="comment"> * Time: 2020/6/8 14:27</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>        $data_str</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $app_secret</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> false|string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">aesDecrypt</span><span class="params">($data_str, $app_secret)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $app_secret = substr(md5($app_secret), <span class="number">0</span>, <span class="number">16</span>);</span><br><span class="line">    $iv = substr(md5($app_secret), <span class="number">8</span>, <span class="number">16</span>);</span><br><span class="line">    $data = openssl_decrypt(base64_decode($data_str), <span class="string">'AES-128-CBC'</span>, $app_secret, OPENSSL_RAW_DATA, $iv);</span><br><span class="line">    <span class="keyword">return</span> $data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;
      
    
    </summary>
    
    
    
      <category term="php-aes" scheme="http://blog.onepie.cn/tags/php-aes/"/>
    
  </entry>
  
  <entry>
    <title>PHP 获取请求协议</title>
    <link href="http://blog.onepie.cn/202006/php-get-http.html"/>
    <id>http://blog.onepie.cn/202006/php-get-http.html</id>
    <published>2020-06-03T03:00:25.000Z</published>
    <updated>2020-06-22T01:10:26.072Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getHttpType</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">$http_type = <span class="string">"http"</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_SERVER[<span class="string">'HTTPS'</span>]) &amp;&amp; $_SERVER[<span class="string">'HTTPS'</span>] == <span class="string">'on'</span>)&#123;</span><br><span class="line">$http_type = <span class="string">"https"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">elseif</span>(<span class="keyword">isset</span>($_SERVER[<span class="string">'HTTP_X_FORWARDED_PROTO'</span>]) &amp;&amp; $_SERVER[<span class="string">'HTTP_X_FORWARDED_PROTO'</span>] == <span class="string">'https'</span>))&#123;</span><br><span class="line">$http_type = <span class="string">"https"</span>;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> $http_type;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;
      
    
    </summary>
    
    
    
      <category term="php_https" scheme="http://blog.onepie.cn/tags/php-https/"/>
    
  </entry>
  
  <entry>
    <title>Linux 解压文件 解压命令</title>
    <link href="http://blog.onepie.cn/201912/linux-unzip.html"/>
    <id>http://blog.onepie.cn/201912/linux-unzip.html</id>
    <published>2019-12-16T12:45:02.000Z</published>
    <updated>2020-06-22T01:10:26.070Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Linux下常见的压缩包格式有5种:zip tar.gz tar.bz2 tar.xz tar.Z</p></blockquote><h3 id="unzip"><a href="#unzip" class="headerlink" title="unzip"></a>unzip</h3><p><code>unzip test.zip</code></p><h3 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h3><p><code>tar -zxvf test.tar.gz</code></p><p><code>tar -jxvf test.tar.bz2</code></p><p><code>tar -Jxvf filename.tar.xz</code></p><p><code>tar -Zxvf filename.tar.Z</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;Linux下常见的压缩包格式有5种:zip tar.gz tar.bz2 tar.xz tar.Z&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;unzip&quot;&gt;&lt;a href=&quot;#unzip&quot; class=&quot;headerlink&quot; title
      
    
    </summary>
    
    
    
      <category term="linux" scheme="http://blog.onepie.cn/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Fiddler 显示服务器ip地址</title>
    <link href="http://blog.onepie.cn/201912/fiddler-show-ip.html"/>
    <id>http://blog.onepie.cn/201912/fiddler-show-ip.html</id>
    <published>2019-12-11T02:55:12.000Z</published>
    <updated>2020-06-22T01:10:25.997Z</updated>
    
    <content type="html"><![CDATA[<h2 id="打开Fiddler"><a href="#打开Fiddler" class="headerlink" title="打开Fiddler"></a>打开Fiddler</h2><p>在菜单栏点击<strong>Rules</strong>,打开菜单<strong>Customize Rules</strong><br><img src="https://img-blog.csdnimg.cn/20191211105317156.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTIyMjIyNDg=,size_16,color_FFFFFF,t_70" alt="菜单选择"></p><h2 id="设置Rules"><a href="#设置Rules" class="headerlink" title="设置Rules"></a>设置Rules</h2><p>在弹出的编辑器，搜索 <code>static function main</code><br>在下面插入一行：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FiddlerObject.UI.lvSessions.AddBoundColumn(<span class="string">"ServerIP"</span>,<span class="number">120</span>,<span class="string">"X-HostIP"</span>);</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/2019121110535380.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTIyMjIyNDg=,size_16,color_FFFFFF,t_70" alt="增加配置"></p><h2 id="重启Fiddler"><a href="#重启Fiddler" class="headerlink" title="重启Fiddler"></a>重启Fiddler</h2><p>重启fiddler 便可显示服务器ip地址<br><img src="https://img-blog.csdnimg.cn/20191211105417942.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTIyMjIyNDg=,size_16,color_FFFFFF,t_70" alt="查看效果"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;打开Fiddler&quot;&gt;&lt;a href=&quot;#打开Fiddler&quot; class=&quot;headerlink&quot; title=&quot;打开Fiddler&quot;&gt;&lt;/a&gt;打开Fiddler&lt;/h2&gt;&lt;p&gt;在菜单栏点击&lt;strong&gt;Rules&lt;/strong&gt;,打开菜单&lt;strong&gt;C
      
    
    </summary>
    
    
    
      <category term="Fiddler" scheme="http://blog.onepie.cn/tags/Fiddler/"/>
    
  </entry>
  
  <entry>
    <title>PHP 实现微信关注公众号或扫码实现获取用户信息</title>
    <link href="http://blog.onepie.cn/201912/wx-scan-login.html"/>
    <id>http://blog.onepie.cn/201912/wx-scan-login.html</id>
    <published>2019-12-09T14:26:16.000Z</published>
    <updated>2020-06-22T01:10:26.073Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote><p>用户可通过扫描二维码进行关注或单纯进行扫码操作，实现获取用户微信信息，提高公众号关注率</p></blockquote><h2 id="详细"><a href="#详细" class="headerlink" title="详细"></a>详细</h2><h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><p><img src="https://img-blog.csdnimg.cn/20191209221754677.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTIyMjIyNDg=,size_16,color_FFFFFF,t_70" alt="扫码登录流程图"></p><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><h4 id="准备公众号及配置"><a href="#准备公众号及配置" class="headerlink" title="准备公众号及配置"></a>准备公众号及配置</h4><p>本文用测试公众号进行配置举例</p><p><img src="https://img-blog.csdnimg.cn/20191209221247457.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTIyMjIyNDg=,size_16,color_FFFFFF,t_70" alt="我的测试账号"></p><h2 id="相关接口文档"><a href="#相关接口文档" class="headerlink" title="相关接口文档"></a>相关接口文档</h2><h4 id="获取access-token"><a href="#获取access-token" class="headerlink" title="获取access_token"></a>获取access_token</h4><p>文档：<a href="https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Get_access_token.html" target="_blank" rel="noopener">获取access_token</a></p><h4 id="生成临时带参二维码"><a href="#生成临时带参二维码" class="headerlink" title="生成临时带参二维码"></a>生成临时带参二维码</h4><p>临时带参二维码方式进行生成二维码，再采用微信事件回调进行用户信息获取。<br>带参二维码生成文档：<a href="https://developers.weixin.qq.com/doc/offiaccount/Account_Management/Generating_a_Parametric_QR_Code.html" target="_blank" rel="noopener">生成带参二维码</a></p><h4 id="用户事件回调"><a href="#用户事件回调" class="headerlink" title="用户事件回调"></a>用户事件回调</h4><p>用户在进行扫码或其他事件，微信会进行事件回调。<br>微信事件回调文档：<a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Receiving_event_pushes.html" target="_blank" rel="noopener">微信事件回调</a></p><h4 id="获取用户详细信息"><a href="#获取用户详细信息" class="headerlink" title="获取用户详细信息"></a>获取用户详细信息</h4><p>获取用户详细信息：<a href="https://developers.weixin.qq.com/doc/offiaccount/User_Management/Get_users_basic_information_UnionID.html#UinonId" target="_blank" rel="noopener">获取用户详细信息</a></p><h2 id="详细程序实现-仅供参考"><a href="#详细程序实现-仅供参考" class="headerlink" title="详细程序实现-仅供参考"></a>详细程序实现-仅供参考</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Class WechatController</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span> \\$&#123;NAMESPACE&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WechatController</span> <span class="keyword">extends</span> <span class="title">BaseController</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $_token = <span class="string">"onepie"</span>;</span><br><span class="line">    <span class="keyword">private</span> $appid = <span class="string">'******'</span>;</span><br><span class="line">    <span class="keyword">private</span> $secrect = <span class="string">'******'</span>;</span><br><span class="line">    <span class="keyword">private</span> $accessToken = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> $qrcode_url = <span class="string">"https://api.weixin.qq.com/cgi-bin/qrcode/create?"</span>;</span><br><span class="line">    <span class="keyword">static</span> $token_url = <span class="string">"https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;"</span>;</span><br><span class="line">    <span class="keyword">static</span> $qrcode_get_url = <span class="string">"https://mp.weixin.qq.com/cgi-bin/showqrcode?"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">indexAction</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $fqid = rand(<span class="number">1000000</span>, <span class="number">99999999</span>);</span><br><span class="line">        $ACCESS_TOKEN = <span class="keyword">$this</span>-&gt;getToken(<span class="keyword">$this</span>-&gt;appid, <span class="keyword">$this</span>-&gt;secrect);</span><br><span class="line">        $url = <span class="keyword">$this</span>-&gt;getQrcodeurl($ACCESS_TOKEN, $fqid, <span class="number">2</span>);</span><br><span class="line">        file_put_contents(LOG_PATH . <span class="string">'/wx.log'</span>, $fqid, FILE_APPEND);</span><br><span class="line">        $img_url = <span class="keyword">$this</span>-&gt;DownLoadQr($url, <span class="string">'qrcode'</span>);</span><br><span class="line">        <span class="keyword">$this</span>-&gt;setData(<span class="string">'qrcode_url'</span>, $img_url);</span><br><span class="line">        <span class="keyword">$this</span>-&gt;setView(<span class="string">'index'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取关注二维码ticket</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>     $ACCESS_TOKEN</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>     $fqid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $type</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool|string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">getQrcodeurl</span><span class="params">($ACCESS_TOKEN, $fqid, $type = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $url = <span class="keyword">self</span>::$qrcode_url . <span class="string">'access_token='</span> . $ACCESS_TOKEN;</span><br><span class="line">        <span class="keyword">if</span> ($type == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//生成永久二维码</span></span><br><span class="line">            $qrcode = <span class="string">'&#123;"action_name": "QR_LIMIT_SCENE", "action_info": &#123;"scene": &#123;"scene_str": '</span> . $fqid . <span class="string">'&#125;&#125;&#125;'</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//生成临时二维码</span></span><br><span class="line">            $qrcode = <span class="string">'&#123;"expire_seconds": 604800, "action_name": "QR_STR_SCENE", "action_info": &#123;"scene": &#123;"scene_str": '</span> . $fqid . <span class="string">'&#125;&#125;&#125;'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $result = http_post_data($url, $qrcode);</span><br><span class="line">        $oo = json_decode($result[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">empty</span>($oo-&gt;ticket)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!$oo-&gt;ticket) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;ErrorLogger(<span class="string">'getQrcodeurl falied. Error Info: getQrcodeurl get failed'</span>);</span><br><span class="line">            <span class="keyword">exit</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        $url = <span class="keyword">self</span>::$qrcode_get_url . <span class="string">'ticket='</span> . $oo-&gt;ticket . <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">echo</span> $oo-&gt;ticket;</span><br><span class="line">        <span class="keyword">return</span> $url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存二维码到服务器</span></span><br><span class="line"><span class="comment">     * 可直接进行展示不进行存储，看业务需求</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $filestring</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool|string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">DownLoadQr</span><span class="params">($url, $filestring)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ($url == <span class="string">""</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $filename = $filestring . rand(<span class="number">0</span>, <span class="number">99999999999</span>) . <span class="string">'.jpg'</span>;</span><br><span class="line">        ob_start();</span><br><span class="line">        readfile($url);</span><br><span class="line">        $img = ob_get_contents();</span><br><span class="line">        ob_end_clean();</span><br><span class="line">        <span class="comment">/*if (!file_exists('/public/qrcode/' . $filename)) &#123;</span></span><br><span class="line"><span class="comment">            touch('/public/qrcode/' . $filename);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        $file = PUBLIC_PATH . <span class="string">'qrcode/'</span> . $filename;</span><br><span class="line">        $fp2 = fopen($file, <span class="string">"a"</span>);</span><br><span class="line">        <span class="keyword">if</span> (fwrite($fp2, $img) === <span class="keyword">false</span>) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;ErrorLogger(<span class="string">'dolwload image falied. Error Info: 无法写入图片'</span>);</span><br><span class="line">            <span class="keyword">exit</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        fclose($fp2);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'/public/qrcode/'</span> . $filename;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $appid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $appsecret</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> mixed</span></span><br><span class="line"><span class="comment">     * 获取token</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">getToken</span><span class="params">($appid, $appsecret)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $url = <span class="string">"https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid="</span> . $appid . <span class="string">"&amp;secret="</span> . $appsecret;</span><br><span class="line">        $token = request_get($url);</span><br><span class="line">        $token = json_decode(stripslashes($token));</span><br><span class="line">        $arr = json_decode(json_encode($token), <span class="keyword">true</span>);</span><br><span class="line">        $access_token = $arr[<span class="string">'access_token'</span>];</span><br><span class="line">        <span class="keyword">return</span> $access_token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">serviceAction</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;showPage = <span class="keyword">false</span>;</span><br><span class="line">        $echoStr = @$_GET[<span class="string">"echostr"</span>];</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">isset</span>($echoStr)) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;responseMsg();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;valid();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">valid</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $nonce = $_GET[<span class="string">'nonce'</span>];</span><br><span class="line">        $token = <span class="keyword">$this</span>-&gt;_token;</span><br><span class="line">        $timestamp = $_GET[<span class="string">'timestamp'</span>];</span><br><span class="line">        $echostr = $_GET[<span class="string">'echostr'</span>];</span><br><span class="line">        $signature = $_GET[<span class="string">'signature'</span>];</span><br><span class="line">        <span class="comment">//形成数组，然后按字典序排序</span></span><br><span class="line">        $array = <span class="keyword">array</span>($nonce, $timestamp, $token);</span><br><span class="line">        sort($array);</span><br><span class="line">        <span class="comment">//拼接成字符串,sha1加密 ，然后与signature进行校验</span></span><br><span class="line">        $str = sha1(implode($array));</span><br><span class="line">        <span class="keyword">if</span> ($str == $signature) &#123;</span><br><span class="line">            <span class="keyword">echo</span> $echostr;</span><br><span class="line">            <span class="keyword">exit</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 微信事件推送接收方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">responseMsg</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $postStr = <span class="keyword">isset</span>($GLOBALS[<span class="string">'HTTP_RAW_POST_DATA'</span>]) ? $GLOBALS[<span class="string">'HTTP_RAW_POST_DATA'</span>] : file_get_contents(<span class="string">"php://input"</span>);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>($postStr)) &#123;</span><br><span class="line">            $postObj = simplexml_load_string($postStr, <span class="string">'SimpleXMLElement'</span>, LIBXML_NOCDATA);</span><br><span class="line">            <span class="comment">// 微信消息类型</span></span><br><span class="line">            $RX_TYPE = trim($postObj-&gt;MsgType);</span><br><span class="line">            <span class="keyword">switch</span> ($RX_TYPE) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">"text"</span>:</span><br><span class="line">                    <span class="comment">// 文本消息</span></span><br><span class="line">                    $resultStr = <span class="keyword">$this</span>-&gt;handleText($postObj);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">"event"</span>:</span><br><span class="line">                    <span class="comment">// 事件推送</span></span><br><span class="line">                    $resultStr = <span class="keyword">$this</span>-&gt;handleEvent($postObj);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    $resultStr = <span class="string">"Unknow msg type: "</span> . $RX_TYPE;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">echo</span> $resultStr;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">exit</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 微信文本消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $postObj</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handleText</span><span class="params">($postObj)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $fromUsername = $postObj-&gt;FromUserName;</span><br><span class="line">        $toUsername = $postObj-&gt;ToUserName;</span><br><span class="line">        $keyword = trim($postObj-&gt;Content);</span><br><span class="line">        $time = time();</span><br><span class="line">        $textTpl = <span class="string">"&lt;xml&gt;</span></span><br><span class="line"><span class="string">                    &lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;</span></span><br><span class="line"><span class="string">                    &lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;</span></span><br><span class="line"><span class="string">                    &lt;CreateTime&gt;%s&lt;/CreateTime&gt;</span></span><br><span class="line"><span class="string">                    &lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;</span></span><br><span class="line"><span class="string">                    &lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;</span></span><br><span class="line"><span class="string">                    &lt;FuncFlag&gt;0&lt;/FuncFlag&gt;</span></span><br><span class="line"><span class="string">                    &lt;/xml&gt;"</span>;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>($keyword)) &#123;</span><br><span class="line">            $msgType = <span class="string">"text"</span>;</span><br><span class="line">            $contentStr = <span class="string">"欢迎您关注"</span>;</span><br><span class="line">            $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</span><br><span class="line">            <span class="keyword">echo</span> $resultStr;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"lalala"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取时间消息并解析相应参数</span></span><br><span class="line"><span class="comment">     * 提供数据简单推送(自动回复)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $object</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handleEvent</span><span class="params">($object)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $contentStr = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">switch</span> ($object-&gt;Event) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"subscribe"</span>:</span><br><span class="line">                $contentStr = <span class="string">"感谢您关注【测试账号】"</span>;</span><br><span class="line">                $openid = (string)$object-&gt;FromUserName; <span class="comment">//数据类型转换为字符串,mmp这个问题找了好久</span></span><br><span class="line">                $refer_id = explode(<span class="string">'_'</span>, $object-&gt;EventKey); <span class="comment">//$object-&gt;EventKey返回的是qrsence_123这种类型</span></span><br><span class="line">                <span class="keyword">$this</span>-&gt;createuserinfo($openid, $refer_id[<span class="number">1</span>]);<span class="comment">//获取用户信息</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"SCAN"</span>:</span><br><span class="line">                $contentStr = <span class="string">"您已关注过，谢谢！"</span>;</span><br><span class="line">                $openid = (string)$object-&gt;FromUserName; <span class="comment">//数据类型转换为字符串,mmp这个问题找了好久</span></span><br><span class="line">                $refer_id = explode(<span class="string">'_'</span>, $object-&gt;EventKey); <span class="comment">//$object-&gt;EventKey返回的是qrsence_123这种类型</span></span><br><span class="line">                <span class="keyword">$this</span>-&gt;createuserinfo($openid, $refer_id[<span class="number">0</span>]);<span class="comment">//获取用户信息</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $resultStr = <span class="keyword">$this</span>-&gt;responseText($object, $contentStr);</span><br><span class="line">        <span class="keyword">return</span> $resultStr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 消息回复模板</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>     $object</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>     $content</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $flag</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">responseText</span><span class="params">($object, $content, $flag = <span class="number">0</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $textTpl = <span class="string">"&lt;xml&gt;</span></span><br><span class="line"><span class="string">                    &lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;</span></span><br><span class="line"><span class="string">                    &lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;</span></span><br><span class="line"><span class="string">                    &lt;CreateTime&gt;%s&lt;/CreateTime&gt;</span></span><br><span class="line"><span class="string">                    &lt;MsgType&gt;&lt;![CDATA[text]]&gt;&lt;/MsgType&gt;</span></span><br><span class="line"><span class="string">                    &lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;</span></span><br><span class="line"><span class="string">                    &lt;FuncFlag&gt;%d&lt;/FuncFlag&gt;</span></span><br><span class="line"><span class="string">                    &lt;/xml&gt;"</span>;</span><br><span class="line">        $resultStr = sprintf($textTpl, $object-&gt;FromUserName, $object-&gt;ToUserName, time(), $content, $flag);</span><br><span class="line">        <span class="keyword">return</span> $resultStr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取用户详细信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $openid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $refer_id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">createuserinfo</span><span class="params">($openid, $refer_id)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $url = <span class="string">"https://api.weixin.qq.com/cgi-bin/user/info?access_token="</span> . <span class="keyword">$this</span>-&gt;getToken(<span class="keyword">$this</span>-&gt;appid, <span class="keyword">$this</span>-&gt;secrect) . <span class="string">"&amp;openid="</span> . $openid;</span><br><span class="line">        $user = request_get($url);</span><br><span class="line">        $user = json_decode($user, <span class="keyword">true</span>);</span><br><span class="line">        $users = <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">'openid'</span> =&gt; $openid,</span><br><span class="line">            <span class="string">'nickname'</span> =&gt; $user[<span class="string">'nickname'</span>],</span><br><span class="line">            <span class="string">'avatar'</span> =&gt; $user[<span class="string">'headimgurl'</span>],</span><br><span class="line">            <span class="string">'sex'</span> =&gt; $user[<span class="string">'sex'</span>],</span><br><span class="line">            <span class="string">'unionid'</span> =&gt; $user[<span class="string">'unionid'</span>],</span><br><span class="line">            <span class="string">'status'</span> =&gt; <span class="number">1</span>,</span><br><span class="line">            <span class="string">'reg_time'</span> =&gt; $user[<span class="string">'subscribe_time'</span>],<span class="comment">//关注公众号的时间</span></span><br><span class="line">            <span class="string">'bind_user'</span> =&gt; $refer_id</span><br><span class="line">        );</span><br><span class="line">        $user_str = date(<span class="string">'Y-m-d H:i:s'</span>) . <span class="string">"\t"</span>;</span><br><span class="line">        <span class="keyword">foreach</span> ($users <span class="keyword">as</span> $key =&gt; $value) &#123;</span><br><span class="line">            $user_str .= $key . <span class="string">'='</span> . $value . <span class="string">"\t"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $user_str .= <span class="string">"\n"</span>;</span><br><span class="line">        file_put_contents(LOG_PATH . <span class="string">"wx.log"</span>, $user_str, FILE_APPEND);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;用户可通过扫描二维码进行关注或单纯进行扫码操作，实现获取用户微信信息，提高公众号关注率&lt;/p&gt;
&lt;/blockqu
      
    
    </summary>
    
    
    
      <category term="php" scheme="http://blog.onepie.cn/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>PHP 位运算操作字符串类型的数字产生的Bug</title>
    <link href="http://blog.onepie.cn/201903/php-bug-01.html"/>
    <id>http://blog.onepie.cn/201903/php-bug-01.html</id>
    <published>2019-03-24T10:03:36.000Z</published>
    <updated>2020-06-22T01:10:26.071Z</updated>
    
    <content type="html"><![CDATA[<p>重点：<strong>在php中 字符(字符串)的位运算操作 是按照Ascii码值来进行计算的</strong></p><blockquote><p>在进行位运算时 如果 其中有一个为数字，则全部按照数字计算,如果都是字符串，则按照assic进行计算<br>如 “10”| 2 或者 “2” | 10<br>数字的位运算按照二进制操作</p></blockquote><p>字符串的位运算规则如下<br>例如：<br>10|2 运算结果为 10<br>“10”|”2” 运算结果为:30<br>解析：<br>    1. 将字符串”10”分割为两个字符 “1” 和 “0” ,转化为相应的Ascii码值分别为 49 和 48  则对应的二进制为 00110001 和  00110000<br>    2. 将字符串”2” 转化为相应的Ascii码值为 50 则对应的二进制为 00110010<br>    3. 因为ascii码以二进制8位一组 在进行运算时左对齐进行运算，后面不够的补0（00000000为字符串 null）<br>    4. 相应计算如下<br>格式：二进制【Ascii-&gt;十进制】<br>|  |  | |<br>|–|–|–|<br>|字符串”10”| 00110001 【49-&gt;1】 | 00110000【48-&gt;0】  |<br>|字符串”10”|  00110010 【50-&gt;2】 | 00000000【0-&gt;Null】  |<br>|计算结果| 00110011【51-&gt;3】| 00110000【48-&gt;0】  |、</p><p>计算出来的ascii值为 51 和 48  分别对应字符串 “3” 和“0”即为30</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;重点：&lt;strong&gt;在php中 字符(字符串)的位运算操作 是按照Ascii码值来进行计算的&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在进行位运算时 如果 其中有一个为数字，则全部按照数字计算,如果都是字符串，则按照assic进行计算&lt;br&gt;如 “10”
      
    
    </summary>
    
    
    
      <category term="php-bug" scheme="http://blog.onepie.cn/tags/php-bug/"/>
    
  </entry>
  
  <entry>
    <title>php include 和 include_once 的区别</title>
    <link href="http://blog.onepie.cn/201901/php-include.html"/>
    <id>http://blog.onepie.cn/201901/php-include.html</id>
    <published>2019-01-23T06:27:48.000Z</published>
    <updated>2020-06-22T01:10:26.072Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>include 会将指定的文件载入并执行里面的程序；重复引用加载多次。<br>include_once 函数会将指定的文件载入并执行里面的程序；此行为和 include 语句类似，唯一区别是如果该文件中已经被包含过，则不会再次包含。</p></blockquote><h3 id="include"><a href="#include" class="headerlink" title="include"></a>include</h3><blockquote><p>include 会将指定的文件载入并执行里面的程序；重复引用加载多次<br>例如：</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">"index.php"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他代码</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span> <span class="string">"index.php"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>上述例子会包含<code>index.php</code>两次</p><h3 id="include-once"><a href="#include-once" class="headerlink" title="include_once"></a>include_once</h3><blockquote><p>include_once 函数会将指定的文件载入并执行里面的程序；此行为和 include 语句类似，唯一区别是如果该文件中已经被包含过，则不会再次包含。<br>例如：</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">"index.php"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他代码</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">"index.php"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>上述例子只会包含<code>index.php</code>一次</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;include 会将指定的文件载入并执行里面的程序；重复引用加载多次。&lt;br&gt;include_once 函数会将指定的文件载入并执行里面的程序；此行为和 include 语句类似，唯一区别是如果该文件中已经被包含过，则不会再次包含。&lt;/p&gt;
&lt;/b
      
    
    </summary>
    
    
    
      <category term="php" scheme="http://blog.onepie.cn/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>Redis 常用命令</title>
    <link href="http://blog.onepie.cn/201901/redis-cli-01.html"/>
    <id>http://blog.onepie.cn/201901/redis-cli-01.html</id>
    <published>2019-01-09T14:51:00.000Z</published>
    <updated>2020-06-22T01:10:26.073Z</updated>
    
    <content type="html"><![CDATA[<h3 id="连接命令"><a href="#连接命令" class="headerlink" title="连接命令"></a>连接命令</h3><p><strong>本地连接</strong></p><blockquote><p>redis-cli</p></blockquote><p><strong>远程连接</strong></p><blockquote><p>redis-cli -h host -p port -a password</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;连接命令&quot;&gt;&lt;a href=&quot;#连接命令&quot; class=&quot;headerlink&quot; title=&quot;连接命令&quot;&gt;&lt;/a&gt;连接命令&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;本地连接&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;redis-cli&lt;/p&gt;
&lt;/bloc
      
    
    </summary>
    
    
    
      <category term="redis" scheme="http://blog.onepie.cn/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>Linux CentOS 7 iptables 开放端口</title>
    <link href="http://blog.onepie.cn/201901/centos-iptables.html"/>
    <id>http://blog.onepie.cn/201901/centos-iptables.html</id>
    <published>2019-01-09T05:33:36.000Z</published>
    <updated>2020-06-22T01:10:25.997Z</updated>
    
    <content type="html"><![CDATA[<h3 id="查看已开放端口"><a href="#查看已开放端口" class="headerlink" title="查看已开放端口:"></a>查看已开放端口:</h3><blockquote><p><code>iptables -L</code></p></blockquote><h3 id="添加端口入口允许-示例：3306-："><a href="#添加端口入口允许-示例：3306-：" class="headerlink" title="添加端口入口允许(示例：3306)："></a>添加端口入口允许(示例：3306)：</h3><blockquote><p><code>iptables -I INPUT -p tcp —dport 3306 -j ACCEPT</code></p></blockquote><h3 id="添加端口出口允许（示例：3306）"><a href="#添加端口出口允许（示例：3306）" class="headerlink" title="添加端口出口允许（示例：3306）:"></a>添加端口出口允许（示例：3306）:</h3><blockquote><p><code>iptables -I OUTPUT -p tcp —sport 3306 -j ACCEPT</code></p></blockquote><h3 id="保存"><a href="#保存" class="headerlink" title="保存:"></a>保存:</h3><blockquote><p><code>service  iptables save</code></p></blockquote><h3 id="查看打开的端口"><a href="#查看打开的端口" class="headerlink" title="查看打开的端口:"></a>查看打开的端口:</h3><blockquote><p><code>iptables status</code></p></blockquote><h3 id="重启"><a href="#重启" class="headerlink" title="重启:"></a>重启:</h3><blockquote><p><code>service iptables restart</code></p></blockquote><h3 id="参数详解"><a href="#参数详解" class="headerlink" title="参数详解"></a>参数详解</h3><blockquote><p>-t&lt;表&gt;：指定要操纵的表；<br>-A：向规则链中添加条目；<br>-D：从规则链中删除条目；<br>-i：向规则链中插入条目；<br>-R：替换规则链中的条目；<br>-L：显示规则链中已有的条目；<br>-F：清楚规则链中已有的条目；<br>-Z：清空规则链中的数据包计算器和字节计数器；<br>-N：创建新的用户自定义规则链；<br>-P：定义规则链中的默认目标；<br>-h：显示帮助信息；<br>-p：指定要匹配的数据包协议类型；<br>-s：指定要匹配的数据包源ip地址；<br>-j&lt;目标&gt;：指定要跳转的目标；<br>-i&lt;网络接口&gt;：指定数据包进入本机的网络接口；<br>-o&lt;网络接口&gt;：指定数据包要离开本机所使用的网络接口。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;查看已开放端口&quot;&gt;&lt;a href=&quot;#查看已开放端口&quot; class=&quot;headerlink&quot; title=&quot;查看已开放端口:&quot;&gt;&lt;/a&gt;查看已开放端口:&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;iptables -L&lt;/code&gt;&lt;/p&gt;
&lt;/bloc
      
    
    </summary>
    
    
    
      <category term="linux-centos" scheme="http://blog.onepie.cn/tags/linux-centos/"/>
    
  </entry>
  
  <entry>
    <title>Git  查看远程仓库地址命令&amp;修改远程仓库地址命令</title>
    <link href="http://blog.onepie.cn/201901/git-cli-01.html"/>
    <id>http://blog.onepie.cn/201901/git-cli-01.html</id>
    <published>2019-01-09T05:13:23.000Z</published>
    <updated>2020-06-22T01:10:25.997Z</updated>
    
    <content type="html"><![CDATA[<h2 id="git查看远程仓库地址命令"><a href="#git查看远程仓库地址命令" class="headerlink" title="git查看远程仓库地址命令"></a>git查看远程仓库地址命令</h2><blockquote><p><code>git remote -v</code></p></blockquote><h2 id="git查看远程仓库地址命令-1"><a href="#git查看远程仓库地址命令-1" class="headerlink" title="git查看远程仓库地址命令"></a>git查看远程仓库地址命令</h2><blockquote><p><code>git remote set-url origin [您的地址]</code></p></blockquote><h3 id="验证是否改变成功"><a href="#验证是否改变成功" class="headerlink" title="验证是否改变成功"></a>验证是否改变成功</h3><blockquote><p><code>git remote -v</code></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;git查看远程仓库地址命令&quot;&gt;&lt;a href=&quot;#git查看远程仓库地址命令&quot; class=&quot;headerlink&quot; title=&quot;git查看远程仓库地址命令&quot;&gt;&lt;/a&gt;git查看远程仓库地址命令&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;git rem
      
    
    </summary>
    
    
    
      <category term="git" scheme="http://blog.onepie.cn/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>MySql  因mysql TINYINT类型设置过小导致的问题</title>
    <link href="http://blog.onepie.cn/201810/mysql-tinyint-bug.html"/>
    <id>http://blog.onepie.cn/201810/mysql-tinyint-bug.html</id>
    <published>2018-10-16T08:02:50.000Z</published>
    <updated>2020-06-22T01:10:26.071Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>今天突然收到邮件，生产环境出问题了，赶紧放下手头的工作进行问题排查。<br>出现问题的系统，是公司内部的财务系统，这出现问题可不是闹着玩的，赶紧进行排查。</p></blockquote><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>在这个财务系统中，涉及到公司几个分公司的财务状况，在系统中，标识公司采用的是位二进制(ID)进行存储，前段时间新增了一个新的公司(ID=128),在配置表中进行了相关字段的配置，测试后没啥问题，发到了生产环境，时隔两天收到bug邮件。</p><h3 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h3><p>经过一段时间分析，最后找主管看下生产环境数据库的字段类型，发现，在一个业务表中设置的来源公司的字段是tinyint(2),才发现是因为新公司的ID=128在写入这个表中的时候变成了127，导致生产环境出现问题。</p><h3 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h3><p>在mysql数据库中，int类型(包含其子类)的长度代表相应的字节数，比如(int 2) 表示 0-2的8次方减一，因此范围是0-127，在存入128时导致数据溢出，自动存储为了127，改下生产环境字段长度，问题得到解决。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;今天突然收到邮件，生产环境出问题了，赶紧放下手头的工作进行问题排查。&lt;br&gt;出现问题的系统，是公司内部的财务系统，这出现问题可不是闹着玩的，赶紧进行排查。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;问题描述&quot;&gt;&lt;a href=&quot;#问题描述
      
    
    </summary>
    
    
    
      <category term="mysql" scheme="http://blog.onepie.cn/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>PHP 报错级别设置和原理分析</title>
    <link href="http://blog.onepie.cn/201805/php-error-reporting-set.html"/>
    <id>http://blog.onepie.cn/201805/php-error-reporting-set.html</id>
    <published>2018-05-03T12:09:43.000Z</published>
    <updated>2020-06-22T01:10:26.071Z</updated>
    
    <content type="html"><![CDATA[<h3 id="原理简介"><a href="#原理简介" class="headerlink" title="原理简介"></a>原理简介</h3><p>在PHP配置文件中php.ini有如下配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">; Error Level Constants:</span><br><span class="line">; E_ALL             - All errors and warnings (includes E_STRICT as of PHP 5.4.0)</span><br><span class="line">; E_ERROR           - fatal run-time errors</span><br><span class="line">; E_RECOVERABLE_ERROR  - almost fatal run-time errors</span><br><span class="line">; E_WARNING         - run-time warnings (non-fatal errors)</span><br><span class="line">; E_PARSE           - compile-time parse errors</span><br><span class="line">; E_NOTICE          - run-time notices (these are warnings which often result</span><br><span class="line">;                     from a bug in your code, but it&#39;s possible that it was</span><br><span class="line">;                     intentional (e.g., using an uninitialized variable and</span><br><span class="line">;                     relying on the fact it is automatically initialized to an</span><br><span class="line">;                     empty string)</span><br><span class="line">; E_STRICT          - run-time notices, enable to have PHP suggest changes</span><br><span class="line">;                     to your code which will ensure the best interoperability</span><br><span class="line">;                     and forward compatibility of your code</span><br><span class="line">; E_CORE_ERROR      - fatal errors that occur during PHP&#39;s initial startup</span><br><span class="line">; E_CORE_WARNING    - warnings (non-fatal errors) that occur during PHP&#39;s</span><br><span class="line">;                     initial startup</span><br><span class="line">; E_COMPILE_ERROR   - fatal compile-time errors</span><br><span class="line">; E_COMPILE_WARNING - compile-time warnings (non-fatal errors)</span><br><span class="line">; E_USER_ERROR      - user-generated error message</span><br><span class="line">; E_USER_WARNING    - user-generated warning message</span><br><span class="line">; E_USER_NOTICE     - user-generated notice message</span><br><span class="line">; E_DEPRECATED      - warn about code that will not work in future versions</span><br><span class="line">;                     of PHP</span><br><span class="line">; E_USER_DEPRECATED - user-generated deprecation warnings</span><br><span class="line">;</span><br><span class="line">; Common Values:</span><br><span class="line">;   E_ALL (Show all errors, warnings and notices including coding standards.)</span><br><span class="line">;   E_ALL &amp; ~E_NOTICE  (Show all errors, except for notices)</span><br><span class="line">;   E_ALL &amp; ~E_NOTICE &amp; ~E_STRICT  (Show all errors, except for notices and coding standards warnings.)</span><br><span class="line">;   E_COMPILE_ERROR|E_RECOVERABLE_ERROR|E_ERROR|E_CORE_ERROR  (Show only errors)</span><br><span class="line">; Default Value: E_ALL &amp; ~E_NOTICE &amp; ~E_STRICT &amp; ~E_DEPRECATED</span><br><span class="line">; Development Value: E_ALL</span><br><span class="line">; Production Value: E_ALL &amp; ~E_DEPRECATED &amp; ~E_STRICT</span><br><span class="line">; http:&#x2F;&#x2F;php.net&#x2F;error-reporting</span><br><span class="line">error_reporting &#x3D; E_ALL</span><br></pre></td></tr></table></figure><p>上面配置中：<code>error_reporting</code>为设置配置级别；默认是<code>E_ALL</code>,意思显示所有Notice,Warning,Error信息(Show all errors, warnings and notices including coding standards.)。<br>在PHP手册预定义常量中有详细解释，下面为摘录的一部分：<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ppYW56aGktMTI1MTY4MjMyMS5maWxlLm15cWNsb3VkLmNvbS9GaXJlU2hvdCUyMENhcHR1cmUlMjAxJTIwLSUyMFBIUF8lMjAlRTklQTIlODQlRTUlQUUlOUElRTQlQjklODklRTUlQjglQjglRTklODclOEYlMjAtJTIwTWFudWFsJTIwLSUyMGh0dHBfX19qcDIucGhwLm5ldF9tYW51YWxfemhfZXJyb3JmdW5jLmNvbnN0YW50cy5waHAucG5n?x-oss-process=image/format,png" alt=""></p><blockquote><p>例子:E_ALL &amp; ~E_NOTICE<br>E_ALL: 111011111111111<br>E_NOTICE: 1000<br>~E_NOTICE: 0111<br>E_ALL &amp; ~E_NOTICE：111011111110111</p></blockquote><p>php就是这样通过二进制的转换来控制错误级别的。</p><h3 id="调整错误级别"><a href="#调整错误级别" class="headerlink" title="调整错误级别"></a>调整错误级别</h3><h4 id="全局设置"><a href="#全局设置" class="headerlink" title="全局设置"></a>全局设置</h4><p>更改<code>php.ini</code>文件中的error_reporting就可以达到效果。<br>例如：</p><ol><li><code>error_reporting = E_ALL #输出所有错误，警告，notice信息</code></li><li><code>error_reporting = E_ALL &amp; ~E_NOTICE #输出所有错误和警告信息，不输出notice信息</code></li><li><code>E_ALL &amp; ~E_NOTICE &amp; ~E_WARNING #输出所有错误信息,不输出警告，notice信息</code><br>####局部设置<br>在脚本或程序中，通过ini_set()和error_reporting()设置可以达到效果。<br>例如:<br><code>ini_set(&quot;display_errors&quot;,1)</code><br><code>error_reporting(E_ALL)</code></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;原理简介&quot;&gt;&lt;a href=&quot;#原理简介&quot; class=&quot;headerlink&quot; title=&quot;原理简介&quot;&gt;&lt;/a&gt;原理简介&lt;/h3&gt;&lt;p&gt;在PHP配置文件中php.ini有如下配置：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;ta
      
    
    </summary>
    
    
    
      <category term="php" scheme="http://blog.onepie.cn/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>Linux 解决ssh连接服务器超时自动断开的问题</title>
    <link href="http://blog.onepie.cn/201805/linux-ssh-close.html"/>
    <id>http://blog.onepie.cn/201805/linux-ssh-close.html</id>
    <published>2018-05-03T12:09:43.000Z</published>
    <updated>2020-06-22T01:10:26.070Z</updated>
    
    <content type="html"><![CDATA[<hr><blockquote><p>通常新服务器，通过ssh连接到服务器之后，一段时间不操作，便会断开链接，那么该如何避免呢，下面我们通过对服务器的ssh进行下设置，便能够解决这个问题</p></blockquote><ol><li><p>登陆服务器，到ssh目录<br>命令:<code>cd /etc/ssh</code></p></li><li><p>备份配置项(养成备份的好习惯)<br>命令:<code>cp /etc/ssh/sshd_config /etc/ssh/sshd_config.20181011.bak</code></p></li><li><p>修改配置项</p><ol><li>打开配置文件：<code>vim /etc/ssh/sshd_config</code></li><li>找到<code>ClientAliveInterval</code>将前面的<code>#</code>去掉</li><li>找到<code>ClientAliveCountMax</code>将前面的<code>#</code>去掉</li><li>两个配置项的数字可根据自己的需求进行更改<blockquote><p>配置项解释:</p><ol><li><code>ClientAliveInterval 60</code>:每隔60s，向客户端发送一次请求。</li><li><code>ClientAliveCountMax 3</code>:超过3次无响应就断开链接。</li></ol></blockquote></li></ol></li></ol><blockquote><p><strong>本人配置的分别是600,10</strong></p></blockquote><ol start="4"><li>重载sshd服务或重启sshd服务<br>命令:<code>service sshd reload</code><br>命令:<code>/etc/init.d/sshd restart</code></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;通常新服务器，通过ssh连接到服务器之后，一段时间不操作，便会断开链接，那么该如何避免呢，下面我们通过对服务器的ssh进行下设置，便能够解决这个问题&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;登陆服务器，到ssh目录&lt;b
      
    
    </summary>
    
    
    
      <category term="linux close" scheme="http://blog.onepie.cn/tags/linux-close/"/>
    
  </entry>
  
  <entry>
    <title>PHP中$_SERVER的详细参数与说明介绍</title>
    <link href="http://blog.onepie.cn/201804/php-server-detail.html"/>
    <id>http://blog.onepie.cn/201804/php-server-detail.html</id>
    <published>2018-04-04T06:17:01.000Z</published>
    <updated>2020-06-22T01:10:26.073Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>PHP编程中经常需要用到一些服务器的一些资料，特把$_SERVER的详细参数整理下，方便以后使用.</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">$_SERVER[<span class="string">'PHP_SELF'</span>] <span class="comment">#当前正在执行脚本的文件名，与 document root相关。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'argv'</span>] <span class="comment">#传递给该脚本的参数。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'argc'</span>] <span class="comment">#包含传递给程序的命令行参数的个数（如果运行在命令行模式）。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'GATEWAY_INTERFACE'</span>] <span class="comment">#服务器使用的 CGI 规范的版本。例如，“CGI/1.1”。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'SERVER_NAME'</span>] <span class="comment">#当前运行脚本所在服务器主机的名称。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'SERVER_SOFTWARE'</span>] <span class="comment">#服务器标识的字串，在响应请求时的头部中给出。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'SERVER_PROTOCOL'</span>] <span class="comment">#请求页面时通信协议的名称和版本。例如，“HTTP/1.0”。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'REQUEST_METHOD'</span>] <span class="comment">#访问页面时的请求方法。例如：“GET”、“HEAD”，“POST”，“PUT”。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'QUERY_STRING'</span>] <span class="comment">#查询(query)的字符串。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'DOCUMENT_ROOT'</span>] <span class="comment">#当前运行脚本所在的文档根目录。在服务器配置文件中定义。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'HTTP_ACCEPT'</span>] <span class="comment">#当前请求的 Accept: 头部的内容。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'HTTP_ACCEPT_CHARSET'</span>] <span class="comment">#当前请求的 Accept-Charset: 头部的内容。例如：“iso-8859-1,*,utf-8”。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'HTTP_ACCEPT_ENCODING'</span>] <span class="comment">#当前请求的 Accept-Encoding: 头部的内容。例如：“gzip”。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'HTTP_ACCEPT_LANGUAGE'</span>]<span class="comment">#当前请求的 Accept-Language: 头部的内容。例如：“en”。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'HTTP_CONNECTION'</span>] <span class="comment">#当前请求的 Connection: 头部的内容。例如：“Keep-Alive”。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'HTTP_HOST'</span>] <span class="comment">#当前请求的 Host: 头部的内容。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'HTTP_REFERER'</span>] <span class="comment">#链接到当前页面的前一页面的 URL 地址。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'HTTP_USER_AGENT'</span>] <span class="comment">#当前请求的 User_Agent: 头部的内容。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'HTTPS'</span>] — 如果通过https访问,则被设为一个非空的值(on)，否则返回off</span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'REMOTE_ADDR'</span>] <span class="comment">#正在浏览当前页面用户的 IP 地址。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'REMOTE_HOST'</span>] <span class="comment">#正在浏览当前页面用户的主机名。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'REMOTE_PORT'</span>] <span class="comment">#用户连接到服务器时所使用的端口。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'SCRIPT_FILENAME'</span>] <span class="comment">#当前执行脚本的绝对路径名。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'SERVER_ADMIN'</span>] <span class="comment">#管理员信息</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'SERVER_PORT'</span>] <span class="comment">#服务器所使用的端口</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'SERVER_SIGNATURE'</span>] <span class="comment">#包含服务器版本和虚拟主机名的字符串。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'PATH_TRANSLATED'</span>] <span class="comment">#当前脚本所在文件系统（不是文档根目录）的基本路径。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'SCRIPT_NAME'</span>] <span class="comment">#包含当前脚本的路径。这在页面需要指向自己时非常有用。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'REQUEST_URI'</span>] <span class="comment">#访问此页面所需的 URI。例如，“/index.html”。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'PHP_AUTH_USER'</span>] <span class="comment">#当 PHP 运行在 Apache 模块方式下，并且正在使用 HTTP 认证功能，这个变量便是用户输入的用户名。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'PHP_AUTH_PW'</span>] <span class="comment">#当 PHP 运行在 Apache 模块方式下，并且正在使用 HTTP 认证功能，这个变量便是用户输入的密码。</span></span><br><span class="line"></span><br><span class="line">$_SERVER[<span class="string">'AUTH_TYPE'</span>] <span class="comment">#当 PHP 运行在 Apache 模块方式下，并且正在使用 HTTP 认证功能，这个变量便是认证的类型。</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;PHP编程中经常需要用到一些服务器的一些资料，特把$_SERVER的详细参数整理下，方便以后使用.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutt
      
    
    </summary>
    
    
    
      <category term="php" scheme="http://blog.onepie.cn/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>MacOS 命令行下使用Sublime Text打开文本文件</title>
    <link href="http://blog.onepie.cn/201804/macos-ssh-sublime-text.html"/>
    <id>http://blog.onepie.cn/201804/macos-ssh-sublime-text.html</id>
    <published>2018-04-03T11:24:56.000Z</published>
    <updated>2020-06-22T01:10:26.070Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>很多程序员最喜欢的编辑器都是SublimeText，在MacOS下，使用vi/vim命令编辑文件是比较苦逼的事情，下面就根据个人实践，向大家介绍怎么使用SublimeText编辑文件。</p></blockquote><p><strong>注意：首先要有一台Mac哦！</strong></p><h4 id="第一步：安装SublimeText编辑器"><a href="#第一步：安装SublimeText编辑器" class="headerlink" title="第一步：安装SublimeText编辑器"></a>第一步：安装SublimeText编辑器</h4><p>这一步不用多说了吧，自己操作；点击下载<a href="http://www.sublimetext.com" target="_blank" rel="noopener">SublimeText</a></p><p>####第二步：编辑用户配置文件<br>打开编辑用户配置文件：<br><code>vim ~/.bash_profile</code>或<code>vim ~/.bashrc</code>或<code>vim ~/.zshrc</code></p><p>注意：.bash_profile 是Mac每次启动终端时都会默认加载的文件，如果没有，请在其他自动加载的文件中编辑，如（.bashrc|| .zshrc ）。</p><p>添加别名：<br><code>alias subl=&quot;&#39;/Applications/SublimeText.app/Contents/SharedSupport/bin/subl&#39;&quot;</code><br> 保存；</p><p>####第三步：重新加载文件<br>在命令行下运行命令：<br><code>source ~/.bash_profile</code>或<code>source ~/.bashrc</code>或<code>source ~/.zshrc</code></p><p>####第四步：开始使用<br>例如：打开<code>~/.bash_profile</code>文件</p><p><code>subl ~/.bash_profile</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;很多程序员最喜欢的编辑器都是SublimeText，在MacOS下，使用vi/vim命令编辑文件是比较苦逼的事情，下面就根据个人实践，向大家介绍怎么使用SublimeText编辑文件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;注意
      
    
    </summary>
    
    
    
      <category term="macos" scheme="http://blog.onepie.cn/tags/macos/"/>
    
  </entry>
  
  <entry>
    <title>MAC 上安全与隐私开启任何来源设置</title>
    <link href="http://blog.onepie.cn/201804/macos-set-secret.html"/>
    <id>http://blog.onepie.cn/201804/macos-set-secret.html</id>
    <published>2018-04-03T07:30:12.000Z</published>
    <updated>2020-06-22T01:10:26.070Z</updated>
    
    <content type="html"><![CDATA[<p>终端下执行：<br><code>sudo spctl --master-disable</code><br>然后输入密码就可以了；</p><p>返回原来的设置：<br>再次执行上述命令就可以了。</p><hr/>Stay Hungry;Stay Foolish;]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;终端下执行：&lt;br&gt;&lt;code&gt;sudo spctl --master-disable&lt;/code&gt;&lt;br&gt;然后输入密码就可以了；&lt;/p&gt;
&lt;p&gt;返回原来的设置：&lt;br&gt;再次执行上述命令就可以了。&lt;/p&gt;
&lt;hr/&gt;
Stay Hungry;Stay Foolish;
      
    
    </summary>
    
    
    
      <category term="macos" scheme="http://blog.onepie.cn/tags/macos/"/>
    
  </entry>
  
</feed>
